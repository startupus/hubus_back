# Changelog

Все значимые изменения в проекте AI Aggregator документируются в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
и проект следует [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [Unreleased]

### Добавлено
- Система тестирования с Jest
- Документация на русском языке
- PowerShell скрипты для тестирования

### Изменено
- Обновлена структура документации
- Улучшена система логирования

### Исправлено
- Исправлены ошибки в тестах
- Улучшена обработка ошибок

## [1.0.0] - 2023-12-01

### Добавлено
- **API Gateway** - единая точка входа для всех запросов
- **Auth Service** - аутентификация и управление пользователями
- **Billing Service** - биллинг и тарификация
- **Payment Service** - обработка платежей через YooKassa
- **Provider Orchestrator** - управление ИИ-провайдерами
- **Proxy Service** - проксирование запросов к ИИ-провайдерам
- **Analytics Service** - сбор метрик и аналитика

### Функциональность
- Поддержка множества ИИ-провайдеров (OpenAI, Anthropic, OpenRouter)
- JWT аутентификация и API ключи
- Гибкая система тарификации (подписки + pay-as-you-go)
- Реферальная система с комиссиями
- Интеграция с YooKassa для SBP платежей
- Управление курсами валют через CBR API
- Детальная аналитика использования

### Технические особенности
- Микросервисная архитектура
- Database per Service
- Асинхронная коммуникация через RabbitMQ
- Кэширование через Redis
- Контейнеризация с Docker
- Мониторинг через Prometheus и Grafana

## [0.9.0] - 2023-11-15

### Добавлено
- Базовая архитектура микросервисов
- Интеграция с OpenAI API
- Простая система аутентификации
- Базовый биллинг

### Изменено
- Рефакторинг монолитной архитектуры
- Разделение на микросервисы

## [0.8.0] - 2023-11-01

### Добавлено
- Первая версия монолитного приложения
- Базовая интеграция с OpenAI
- Простая система пользователей

### Исправлено
- Критические ошибки безопасности
- Проблемы с производительностью

## [0.7.0] - 2023-10-15

### Добавлено
- MVP версия платформы
- Базовая документация
- Docker конфигурация

## [0.6.0] - 2023-10-01

### Добавлено
- Исследование архитектуры
- Прототипы сервисов
- Техническое задание

## [0.5.0] - 2023-09-15

### Добавлено
- Концепция проекта
- Анализ требований
- Выбор технологического стека

---

## Типы изменений

- **Добавлено** - для новых функций
- **Изменено** - для изменений в существующей функциональности
- **Устарело** - для функций, которые будут удалены в будущих версиях
- **Удалено** - для удаленных функций
- **Исправлено** - для исправления ошибок
- **Безопасность** - для исправлений уязвимостей

## Соглашения

### Версионирование

Проект использует [Semantic Versioning](https://semver.org/):
- **MAJOR** версия - несовместимые изменения API
- **MINOR** версия - новая функциональность с обратной совместимостью
- **PATCH** версия - исправления ошибок с обратной совместимостью

### Формат записей

Каждая запись должна содержать:
- Тип изменения
- Краткое описание
- Ссылку на Issue/PR (если есть)

### Примеры

```markdown
### Добавлено
- Новая функция X для улучшения Y
- Поддержка провайдера Z ([#123](https://github.com/org/repo/issues/123))

### Изменено
- Улучшена производительность API Gateway
- Обновлена документация по развертыванию

### Исправлено
- Исправлена ошибка в расчете стоимости ([#456](https://github.com/org/repo/pull/456))
- Устранена утечка памяти в Auth Service

### Удалено
- Устаревший endpoint `/api/v1/legacy/old`
- Поддержка Python 3.7
```

## Миграции

### База данных

При изменении схемы БД создавайте миграции:

```bash
# Создание миграции
npx prisma migrate dev --name add_new_table

# Применение миграций в production
npx prisma migrate deploy
```

### API

При изменении API следуйте принципам:
- **Backward compatibility** - старые версии должны работать
- **Deprecation period** - предупреждайте об устаревании за 2 версии
- **Versioning** - используйте версионирование API (`/api/v1/`, `/api/v2/`)

### Конфигурация

При изменении переменных окружения:
- Добавляйте новые с дефолтными значениями
- Помечайте устаревшие как deprecated
- Обновляйте документацию

## Планы развития

### Версия 1.1.0 (Планируется)

#### Добавлено
- Поддержка WebSocket для real-time чата
- Интеграция с Anthropic Claude 3
- Система уведомлений
- Расширенная аналитика

#### Изменено
- Улучшена производительность кэширования
- Оптимизированы запросы к БД

### Версия 1.2.0 (Планируется)

#### Добавлено
- Поддержка Google Gemini
- Система A/B тестирования
- Автоматическое масштабирование
- Интеграция с внешними мониторинг системами

#### Изменено
- Рефакторинг архитектуры для лучшей масштабируемости
- Улучшение системы логирования

### Версия 2.0.0 (Планируется)

#### Добавлено
- Поддержка мультитенантности
- Система ролей и разрешений
- GraphQL API
- Микросервис для машинного обучения

#### Изменено
- Полный рефакторинг API
- Переход на новую архитектуру данных

## Контакты

- **Email**: support@ai-aggregator.com
- **GitHub**: [https://github.com/your-org/ai-aggregator](https://github.com/your-org/ai-aggregator)
- **Документация**: [https://docs.ai-aggregator.com](https://docs.ai-aggregator.com)
