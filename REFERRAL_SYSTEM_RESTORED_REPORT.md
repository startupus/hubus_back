# –û—Ç—á–µ—Ç –æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã

## –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ–ª—è `referredBy` –∏ `referralCodeId` –±—ã–ª–∏ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤ `company.service.ts`, —á—Ç–æ –ø–æ–º–µ—à–∞–ª–æ —Ä–∞–±–æ—Ç–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã.

## –ü—Ä–∏—á–∏–Ω–∞
Prisma –∫–ª–∏–µ–Ω—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª—Å—è –≤ –æ–±—â—É—é –ø–∞–ø–∫—É `node_modules/@prisma/client`, –Ω–æ –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ.

## –†–µ—à–µ–Ω–∏–µ

### ‚úÖ 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Prisma –¥–ª—è auth-service
- **–û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å—Ö–µ–º–∞ Prisma**: –¥–æ–±–∞–≤–ª–µ–Ω `output = "../node_modules/.prisma/client"` –≤ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä
- **–ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω Prisma –∫–ª–∏–µ–Ω—Ç**: —Ç–µ–ø–µ—Ä—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω—É—é –ø–∞–ø–∫—É `services/auth-service/node_modules/.prisma/client`
- **–û–±–Ω–æ–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç**: `PrismaService` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π Prisma –∫–ª–∏–µ–Ω—Ç

### ‚úÖ 2. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
- **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–ª—è `referredBy` –∏ `referralCodeId`** –≤ `registerCompany` –º–µ—Ç–æ–¥–µ
- **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ø–æ–ª—è –≤ `mapCompanyToDto`** –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `validateReferralLink`** –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö —Å—Å—ã–ª–æ–∫

### ‚úÖ 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- **Prisma –∫–ª–∏–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç**: –º–æ–¥–µ–ª—å `ReferralCode` –¥–æ—Å—Ç—É–ø–Ω–∞
- **–ü–æ–ª—è –¥–æ—Å—Ç—É–ø–Ω—ã**: `referredBy` –∏ `referralCodeId` –≤–∏–¥–Ω—ã –≤ TypeScript
- **API —Ä–∞–±–æ—Ç–∞–µ—Ç**: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## –†–µ–∑—É–ª—å—Ç–∞—Ç

**–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞!** üéâ

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è —Å —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã–º–∏ —Å—Å—ã–ª–∫–∞–º–∏** - `referralLink` –ø–∞—Ä–∞–º–µ—Ç—Ä –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –∫–æ–¥–æ–≤** - —Ñ—É–Ω–∫—Ü–∏—è `validateReferralLink` —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** - –ø–æ–ª—è `referredBy` –∏ `referralCodeId` —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è
- ‚úÖ **–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** - –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–π Prisma –∫–ª–∏–µ–Ω—Ç

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏:
- **Prisma –∫–ª–∏–µ–Ω—Ç**: –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
- **–°—Ö–µ–º–∞**: `services/auth-service/prisma/schema.prisma` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º output
- **–ò–º–ø–æ—Ä—Ç**: `PrismaService` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π –∫–ª–∏–µ–Ω—Ç
- **–ü–æ–ª—è**: `referredBy` –∏ `referralCodeId` –¥–æ—Å—Ç—É–ø–Ω—ã –≤ TypeScript

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤ —Ä–∞–º–∫–∞—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã. –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π Prisma –∫–ª–∏–µ–Ω—Ç, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∏–∑–æ–ª—è—Ü–∏—é –∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤.

**–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ —Å —Ä–µ—Ñ–µ—Ä–∞–ª–∞–º–∏!** üöÄ
