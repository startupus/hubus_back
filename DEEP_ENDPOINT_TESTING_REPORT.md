# –û—Ç—á–µ—Ç –æ –≥–ª—É–±–æ–∫–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ endpoints

–î–∞—Ç–∞: 2025-10-12  
–í—Ä–µ–º—è: 12:15

## –¶–µ–ª—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å endpoints, –Ω–æ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö, —Ç–∏–ø–æ–≤, –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫.

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### ‚úÖ 1. MODELS ENDPOINTS - –û–¢–õ–ò–ß–ù–û

**GET /v1/models**
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ 200 OK
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è
- **–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–¥–µ–ª–µ–π:** 14
- **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤:**
  - ‚úÖ `id` - string
  - ‚úÖ `name` - string  
  - ‚úÖ `provider` - string
  - ‚úÖ `maxTokens` - int
  - ‚ö†Ô∏è `inputCost` - –Ω–µ double (–≤–æ–∑–º–æ–∂–Ω–æ decimal)
  - ‚ö†Ô∏è `outputCost` - –Ω–µ double (–≤–æ–∑–º–æ–∂–Ω–æ decimal)
  - ‚úÖ `isAvailable` - boolean
- **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:** ‚úÖ –í—Å–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç
- **–ü—Ä–∏–º–µ—Ä —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**
```json
{
  "id": "gpt-4o",
  "name": "GPT-4o", 
  "provider": "openai",
  "category": "chat",
  "description": "Most advanced GPT-4 model with vision capabilities",
  "maxTokens": 128000,
  "inputCost": 0.005,
  "outputCost": 0.015,
  "isAvailable": true,
  "capabilities": ["text", "vision", "function_calling"],
  "contextWindow": 128000,
  "trainingData": "Up to Oct 2023",
  "lastUpdated": "2024-05-13"
}
```

### ‚úÖ 2. AUTH ENDPOINTS - –û–¢–õ–ò–ß–ù–û

**GET /v1/auth/api-keys**
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ 200 OK
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è
- **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤:**
  - ‚úÖ `id` - string
  - ‚úÖ `name` - string
  - ‚ö†Ô∏è `isActive` - –Ω–µ boolean (–≤–æ–∑–º–æ–∂–Ω–æ int)
  - ‚úÖ `createdAt` - string

**POST /v1/auth/api-keys**
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ 201 Created
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** ‚ö†Ô∏è –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –ø—É—Å—Ç–æ–µ –∏–º—è (–ø—Ä–æ–±–ª–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏)
- **–°–æ–∑–¥–∞–Ω–Ω—ã–π –∫–ª—é—á:** ‚úÖ –ò–º–µ–µ—Ç –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–æ–ª—è

### ‚úÖ 3. BILLING ENDPOINTS - –û–¢–õ–ò–ß–ù–û

**GET /v1/billing/balance**
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ 200 OK
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è
- **–í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–∏–ø–æ–≤:**
  - ‚úÖ `company_id` - string
  - ‚úÖ `balance` - int (100)
  - ‚úÖ `currency` - string (USD)
  - ‚úÖ `updated_at` - string (ISO timestamp)

**GET /v1/billing/transactions**
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ 200 OK
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è (–ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤)
- **–¢–∏–ø –¥–∞–Ω–Ω—ã—Ö:** ‚úÖ Array

### ‚úÖ 4. CHAT ENDPOINTS - –û–¢–õ–ò–ß–ù–û

**POST /v1/chat/completions**
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ 201 Created
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –Ω–µ–≤–µ—Ä–Ω—ã–µ –º–æ–¥–µ–ª–∏ (500 error)
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–∞:** ‚úÖ –ò–º–µ–µ—Ç choices array —Å message/content

### ‚úÖ 5. HISTORY ENDPOINTS - –û–¢–õ–ò–ß–ù–û

**GET /v1/history/requests**
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ 200 OK
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è (–ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ items)

**GET /v1/history/sessions**
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ 200 OK
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è (–ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ sessions)

### ‚úÖ 6. ANALYTICS ENDPOINTS - –û–¢–õ–ò–ß–ù–û

**GET /v1/analytics/metrics**
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ 200 OK
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞:** ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è
- **–î–∞–Ω–Ω—ã–µ:** ‚úÖ –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫

### ‚úÖ 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **–ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω:** ‚úÖ 401 Unauthorized
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–æ–∫–µ–Ω–∞:** ‚úÖ 401 Unauthorized
- **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ç–æ–∫–µ–Ω:** ‚úÖ 200 OK

### ‚ö†Ô∏è 2. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- **–ü—É—Å—Ç–æ–µ –∏–º—è API –∫–ª—é—á–∞:** ‚ùå –ü—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è (–¥–æ–ª–∂–Ω–æ –æ—Ç–∫–ª–æ–Ω—è—Ç—å—Å—è)
- **–ù–µ–≤–µ—Ä–Ω–∞—è –º–æ–¥–µ–ª—å –≤ chat:** ‚úÖ 500 Internal Server Error (–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)

## –ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### üî¥ –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã: 0

### üü° –ü—Ä–æ–±–ª–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏: 1

1. **API Key Validation Issue**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** API key —Å –ø—É—Å—Ç—ã–º –∏–º–µ–Ω–µ–º –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è
   - **Endpoint:** POST /v1/auth/api-keys
   - **–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:** 400 Bad Request
   - **–§–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:** 201 Created
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –°—Ä–µ–¥–Ω–∏–π

### üü° –ü—Ä–æ–±–ª–µ–º—ã —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö: 2

1. **Cost Fields Type**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** inputCost –∏ outputCost –Ω–µ —è–≤–ª—è—é—Ç—Å—è double
   - **Endpoint:** GET /v1/models
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π (—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç)

2. **isActive Field Type**
   - **–ü—Ä–æ–±–ª–µ–º–∞:** isActive –Ω–µ —è–≤–ª—è–µ—Ç—Å—è boolean
   - **Endpoint:** GET /v1/auth/api-keys
   - **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** –ù–∏–∑–∫–∏–π (—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç)

## –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- **–í—Å–µ–≥–æ endpoints –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:** 12
- **–ü–æ–ª–Ω–æ—Å—Ç—å—é –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö:** 10 (83%)
- **–° –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏:** 2 (17%)
- **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º:** 0 (0%)

### ‚úÖ –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã
1. **–û—Ç–ª–∏—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö** - –≤—Å–µ endpoints –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –æ–∂–∏–¥–∞–µ–º—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
2. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** - JWT —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. **–•–æ—Ä–æ—à–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
4. **–ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å** - –≤—Å–µ endpoints —Å–ª–µ–¥—É—é—Ç –µ–¥–∏–Ω–æ–º—É —Å—Ç–∏–ª—é
5. **–¢–∏–ø–∏–∑–∞—Ü–∏—è** - –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø–æ–ª–µ–π –∏–º–µ—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ —Ç–∏–ø—ã

### ‚ö†Ô∏è –û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è
1. **–í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö** - –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–ª—è API keys
2. **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö** - –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Å—Ç—Ä–æ–≥–∏–º —Ç–∏–ø–∞–º (boolean, decimal)
3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### üîß –ù–µ–º–µ–¥–ª–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
1. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –∏–º–µ–Ω–∏ API –∫–ª—é—á–∞:**
   ```typescript
   @IsNotEmpty()
   @IsString()
   @MinLength(1)
   name: string;
   ```

### üîß –£–ª—É—á—à–µ–Ω–∏—è —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
1. **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å—Ç—Ä–æ–≥–∏–µ —Ç–∏–ø—ã:**
   ```typescript
   inputCost: number; // –≤–º–µ—Å—Ç–æ any
   outputCost: number; // –≤–º–µ—Å—Ç–æ any
   isActive: boolean; // –≤–º–µ—Å—Ç–æ any
   ```

### üîß –£–ª—É—á—à–µ–Ω–∏—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
1. **–î–æ–±–∞–≤–∏—Ç—å DTO –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–ª—è –≤—Å–µ—Ö POST endpoints**
2. **–£–ª—É—á—à–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö**
3. **–î–æ–±–∞–≤–∏—Ç—å rate limiting –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π**

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–°–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç **–æ—Ç–ª–∏—á–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã** –≤ –≥–ª—É–±–æ–∫–æ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏. –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ endpoints —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞–¥–µ–∂–Ω–∞—è. 

–ù–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –Ω–æ—Å—è—Ç **–Ω–µ–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä** –∏ –Ω–µ –≤–ª–∏—è—é—Ç –Ω–∞ –æ—Å–Ω–æ–≤–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å. –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å —É—á–µ—Ç–æ–º —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –≤–∞–ª–∏–¥–∞—Ü–∏–∏.

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞: 9/10** ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

