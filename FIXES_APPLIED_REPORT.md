# üîß –û–¢–ß–ï–¢: –ü–†–ò–ú–ï–ù–ï–ù–ù–´–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

## üìã –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

### **1. ‚úÖ Rate Limiting –≤ Billing Service**

**–ü—Ä–æ–±–ª–µ–º–∞:** API Gateway –ø—Ä–µ–≤—ã—à–∞–ª –ª–∏–º–∏—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ billing service (100 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É)

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- **–£–≤–µ–ª–∏—á–µ–Ω –ª–∏–º–∏—Ç** –¥–ª—è `getBalance` —Å 100 –¥–æ 1000 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
- **–î–æ–±–∞–≤–ª–µ–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ** –¥–ª—è API Gateway (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –≤—ã–∑–æ–≤—ã)
- **–õ–æ–≥–∏–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏—è:**
  ```typescript
  const isApiGateway = userAgent.includes('axios') || 
                      request.headers['x-internal-call'] === 'true' ||
                      request.ip?.startsWith('172.') || // Docker internal network
                      request.headers['x-forwarded-for']?.includes('172.');
  
  if (isApiGateway) {
    return true; // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º rate limiting
  }
  ```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ Rate limiting –±–æ–ª—å—à–µ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –æ—Ç API Gateway

### **2. ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏**

**–ü—Ä–æ–±–ª–µ–º–∞:** DashboardComponent –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª—Å—è –ø–æ—Å–ª–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞ –≤ BillingComponent

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**
- **–î–æ–±–∞–≤–ª–µ–Ω useEffect** –≤ DashboardComponent –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º:
  ```javascript
  // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  useEffect(() => {
    if (user?.balance !== undefined) {
      setBalance(user.balance);
    }
  }, [user?.balance]);
  ```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ DashboardComponent —Ç–µ–ø–µ—Ä—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏ –≤ BillingComponent

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### **‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
1. **Rate limiting** - –±–æ–ª—å—à–µ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã –æ—Ç API Gateway
2. **–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ($50 –¥–æ–±–∞–≤–ª–µ–Ω, –±–∞–ª–∞–Ω—Å —Å—Ç–∞–ª $250)
3. **Billing service** - –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –±–∞–ª–∞–Ω—Å –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
4. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** - Dashboard –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è

### **‚ùå –û—Å—Ç–∞–≤—à–∏–µ—Å—è –ø—Ä–æ–±–ª–µ–º—ã:**
1. **–ó–∞–≥—Ä—É–∑–∫–∞ –±–∞–ª–∞–Ω—Å–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ** - API Gateway –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ JWT —Ç–æ–∫–µ–Ω–∞
2. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∞–∑–ª–æ–≥–∏–Ω–∏–≤–∞–µ—Ç—Å—è –∏–∑-–∑–∞ –æ—à–∏–±–∫–∏ 500

## üìä –î–µ—Ç–∞–ª–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

| –§—É–Ω–∫—Ü–∏—è | –î–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è | –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è | –°—Ç–∞—Ç—É—Å |
|---------|----------------|-------------------|--------|
| üîê **Rate limiting** | ‚ùå –ë–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã | ‚úÖ –ü—Ä–æ–ø—É—Å–∫–∞–µ—Ç API Gateway | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| üí∞ **–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –†–∞–±–æ—Ç–∞–µ—Ç |
| üîÑ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** | ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ |
| üíæ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –†–∞–±–æ—Ç–∞–µ—Ç |
| üîÑ **–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ** | ‚ùå Fallback –∫ 0 | ‚ùå Fallback –∫ 0 | –¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è |

## üîç –ê–Ω–∞–ª–∏–∑ –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –ø—Ä–æ–±–ª–µ–º

### **–ü—Ä–æ–±–ª–µ–º–∞: API Gateway –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ JWT**

**–°–∏–º–ø—Ç–æ–º—ã:**
- Billing service –ø–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å ID `60d88540-6c6a-4f86-b877-f23b911d970d`
- API Gateway –Ω–µ –º–æ–∂–µ—Ç –∏–∑–≤–ª–µ—á—å ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ JWT —Ç–æ–∫–µ–Ω–∞
- Frontend –ø–æ–ª—É—á–∞–µ—Ç fallback –±–∞–ª–∞–Ω—Å $0.00

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ JWT —Ç–æ–∫–µ–Ω–∞** - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –≤ –ø–æ–ª–µ `sub` –∏–ª–∏ `id`
2. **–ü—Ä–æ–±–ª–µ–º–∞ —Å JWT –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ–º** –≤ API Gateway
3. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–µ—Ä–µ–¥–∞—á–∞ ID** –≤ –∑–∞–ø—Ä–æ—Å–µ –∫ billing service

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### **–ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ:**
1. **–û—Ç–ª–∞–¥–∏—Ç—å JWT —Ç–æ–∫–µ–Ω** - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ ID** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ API Gateway
3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–¥–∞—á—É ID** –≤ –∑–∞–ø—Ä–æ—Å–µ –∫ billing service

### **–ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω–æ:**
1. **–£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫** –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. **–î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ JWT —Ç–æ–∫–µ–Ω–æ–≤

## üöÄ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!** 

- ‚úÖ **Rate limiting** –±–æ–ª—å—à–µ –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤** —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ **–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞** —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

**–û—Å—Ç–∞–≤—à–∞—è—Å—è –ø—Ä–æ–±–ª–µ–º–∞:** API Gateway –Ω–µ –º–æ–∂–µ—Ç –∏–∑–≤–ª–µ—á—å ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ JWT —Ç–æ–∫–µ–Ω–∞, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ fallback –±–∞–ª–∞–Ω—Å—É $0.00.

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 13 –æ–∫—Ç—è–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–°—Ç–∞—Ç—É—Å:** üü° **–ß–ê–°–¢–ò–ß–ù–û –ò–°–ü–†–ê–í–õ–ï–ù–û** (—Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç–ª–∞–¥–∫–∞ JWT)